import translations from"./translations.js";const carousel=document.querySelector(".screenshots-carousel"),screenshots=document.querySelectorAll(".screenshot"),prevButton=document.querySelector(".prev-button"),nextButton=document.querySelector(".next-button");let autoScrollInterval,scrollPosition=0;const singleScreenshotWidth=screenshots[0].offsetWidth,scrollStep=singleScreenshotWidth,autoScrollDelay=3e3,totalSlides=screenshots.length;function startAutoScroll(){stopAutoScroll(),autoScrollInterval=setInterval((()=>{const e=carousel.scrollLeft,t=carousel.scrollWidth-carousel.clientWidth;scrollPosition=e>=t?0:Math.min(e+scrollStep,t),carousel.scrollTo({left:scrollPosition,behavior:"smooth"})}),3e3)}function stopAutoScroll(){autoScrollInterval&&clearInterval(autoScrollInterval)}startAutoScroll(),carousel.addEventListener("mouseenter",stopAutoScroll),carousel.addEventListener("mouseleave",startAutoScroll);const modal=document.querySelector(".screenshot-modal"),modalOverlay=document.querySelector(".modal-overlay"),modalClose=document.querySelector(".modal-close"),modalImage=document.querySelector(".modal-image"),modalTitle=document.querySelector(".modal-title"),modalDescription=document.querySelector(".modal-description"),modalExists=modal&&modalOverlay&&modalClose&&modalImage&&modalTitle&&modalDescription;function getLocalizedText(e,t){const o=e.getAttribute(t);if(!o)return e.getAttribute("data-title")||e.getAttribute("data-description")||"";const l=localStorage.getItem("language")||"am",r=o.split(".");let s=translations[l];for(const t of r){if(!s||!s[t])return e.getAttribute("data-title")||e.getAttribute("data-description")||"";s=s[t]}return s}prevButton.addEventListener("click",(()=>{stopAutoScroll(),scrollPosition=carousel.scrollLeft-scrollStep,scrollPosition<0&&(scrollPosition=carousel.scrollWidth-carousel.clientWidth),carousel.scrollTo({left:scrollPosition,behavior:"smooth"}),"function"==typeof updateDots&&updateDots()})),nextButton.addEventListener("click",(()=>{stopAutoScroll(),scrollPosition=carousel.scrollLeft+scrollStep,scrollPosition>carousel.scrollWidth-carousel.clientWidth&&(scrollPosition=0),carousel.scrollTo({left:scrollPosition,behavior:"smooth"}),"function"==typeof updateDots&&updateDots()})),prevButton.addEventListener("mouseleave",startAutoScroll),nextButton.addEventListener("mouseleave",startAutoScroll);let currentOpenedScreenshot=null;function updateModalText(){if(modalExists&&currentOpenedScreenshot){const e=getLocalizedText(currentOpenedScreenshot,"data-i18n-title"),t=getLocalizedText(currentOpenedScreenshot,"data-i18n-description");modalTitle.textContent=e,modalDescription.textContent=t}}if(document.addEventListener("languageChanged",updateModalText),modalExists){function openModal(e){const t=e.querySelector("img").src;currentOpenedScreenshot=e;const o=getLocalizedText(e,"data-i18n-title"),l=getLocalizedText(e,"data-i18n-description");modalImage.src=t,modalTitle.textContent=o,modalDescription.textContent=l,modal.classList.add("active"),document.body.style.overflow="hidden"}function closeModal(){modal.classList.remove("active"),document.body.style.overflow="",currentOpenedScreenshot=null}screenshots.forEach((e=>{e.addEventListener("click",(()=>{openModal(e)}))})),modalOverlay.addEventListener("click",closeModal),modalClose.addEventListener("click",closeModal),document.addEventListener("keydown",(e=>{"Escape"===e.key&&closeModal()}))}else console.warn("Some modal elements are missing");