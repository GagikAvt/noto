import translations from"./translations.js";const originalTexts=new Map,flagUrls={am:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 480'%3E%3Cpath fill='%23F00' d='M0 0h640v160H0z'/%3E%3Cpath fill='%2300F' d='M0 160h640v160H0z'/%3E%3Cpath fill='%23FAA94B' d='M0 320h640v160H0z'/%3E%3C/svg%3E",en:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 480'%3E%3Cpath fill='%23012169' d='M0 0h640v480H0z'/%3E%3Cpath fill='%23FFF' d='M75 0l244 181L562 0h78v62L400 241l240 178v61h-80L320 301 81 480H0v-60l239-178L0 64V0h75z'/%3E%3Cpath fill='%23CF142B' d='M424 281l216 159v40L369 281h55zm-184 20l6 35L54 480H0l240-179zM640 0v3L391 191l2-44L590 0h50zM0 0l239 176h-60L0 42V0z'/%3E%3Cpath fill='%23FFF' d='M241 0v480h160V0H241zM0 160v160h640V160H0z'/%3E%3Cpath fill='%23CF142B' d='M0 193v96h640v-96H0zM273 0v480h96V0h-96z'/%3E%3C/svg%3E",ru:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 480'%3E%3Cpath fill='%23FFF' d='M0 0h640v480H0z'/%3E%3Cpath fill='%230039A6' d='M0 160h640v320H0z'/%3E%3Cpath fill='%23D52B1E' d='M0 320h640v160H0z'/%3E%3C/svg%3E"},dropdownIconUrl="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E";let currentLanguage=localStorage.getItem("language")||"am";function setLanguage(t){const e=[document.getElementById("languageSelect"),document.getElementById("languageSelectDesktop"),document.getElementById("languageSelectMobile")].filter((t=>null!==t));translations[t]||"am"===t||(console.warn(`Language "${t}" not found. Defaulting to ${currentLanguage}.`),t=currentLanguage),currentLanguage=t,updateContent(),localStorage.setItem("language",t),e.forEach((t=>{t.value=currentLanguage;const e=flagUrls[currentLanguage];e?t.style.backgroundImage=`url("${e}"), url("${dropdownIconUrl}")`:(t.style.backgroundImage=`url("${dropdownIconUrl}")`,t.style.backgroundPosition="right 8px center",t.style.paddingLeft="10px")})),document.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:currentLanguage}}))}function getCurrentLanguage(){return currentLanguage}function getTranslation(t){if("am"===currentLanguage){const e=document.querySelector(`[data-i18n="${t}"]`);return originalTexts.get(e)||t}const e=t.split(".");if(!translations[currentLanguage])return console.warn(`Translations for language "${currentLanguage}" not found.`),t;let a=translations[currentLanguage];for(const n of e){if(!a||"object"!=typeof a||!a.hasOwnProperty(n))return t;a=a[n]}return"string"==typeof a?a:t}function updateContent(){document.querySelectorAll("[data-i18n]").forEach((t=>{originalTexts.has(t)||originalTexts.set(t,t.textContent);const e=t.getAttribute("data-i18n");t.textContent="am"===currentLanguage?originalTexts.get(t)||"":getTranslation(e)}))}function initializeLanguage(){document.querySelectorAll("[data-i18n]").forEach((t=>{originalTexts.has(t)||originalTexts.set(t,t.textContent)}));const t=localStorage.getItem("language");let e="am";t&&(translations[t]||"am"===t)?e=t:localStorage.setItem("language",e),setLanguage(e)}function handleLanguageChange(t){setLanguage(t.target.value)}export{setLanguage,getCurrentLanguage,getTranslation,updateContent,initializeLanguage,handleLanguageChange};